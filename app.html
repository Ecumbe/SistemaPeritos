<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SistemaPeritos - Aplicación</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

    <link rel="stylesheet" href="css/style.css">
</head>
<body class="app-body">

    <nav class="navbar navbar-expand-lg navbar-dark app-navbar fixed-top shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fa-solid fa-shield-halved"></i>
                SistemaPeritos
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarApp">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarApp">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
                    <li class="nav-item">
                        <span class="navbar-text me-3" id="user-greeting">
                            Cargando...
                        </span>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-outline-danger" id="btn-logout">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            Cerrar Sesión
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid app-main-content">
        
        <ul class="nav nav-tabs app-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="inicio-tab" data-bs-toggle="tab" data-bs-target="#inicio-pane" type="button" role="tab">
                    <i class="fa-solid fa-house"></i> Inicio
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="nuevo-tab" data-bs-toggle="tab" data-bs-target="#nuevo-pane" type="button" role="tab">
                    <i class="fa-solid fa-plus-circle"></i> Nuevo Informe
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="buscar-tab" data-bs-toggle="tab" data-bs-target="#buscar-pane" type="button" role="tab">
                    <i class="fa-solid fa-search"></i> Buscar
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="editar-tab" data-bs-toggle="tab" data-bs-target="#editar-pane" type="button" role="tab" disabled>
                    <i class="fa-solid fa-pen-to-square"></i> Editar (Bloqueado)
                </button>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">
            
            <div class="tab-pane fade show active p-4" id="inicio-pane" role="tabpanel">
                <h3 class="mb-3">¡Bienvenido a SistemaPeritos!</h3>
                <p>Este es tu panel principal. Desde aquí puedes gestionar tus informes.</p>
                <hr class="my-4">
                <h4>Funcionalidades:</h4>
                <ul>
                    <li><strong>Nuevo Informe:</strong> Crea un nuevo informe pericial desde cero.</li>
                    <li><strong>Buscar:</strong> Busca, visualiza e imprime informes que ya has creado.</li>
                    <li><strong>Editar:</strong> (Función deshabilitada) Esta pestaña se activará cuando selecciones un informe desde "Buscar".</li>
                </ul>
                <h5 class="mt-4">Informes Hechos: <span id="report-count" class="badge bg-primary">00</span></h5>
            </div>

            <div class="tab-pane fade p-4" id="nuevo-pane" role="tabpanel">
                
                <div id="wizard-step-1">
                    <h3 class="mb-3">Paso 1: Cargar Datos de Flagrancia</h3>
                    <p class="text-white-50">Busca el "Número de Instrucción Fiscal" (completo o los últimos 8 dígitos) para autocompletar.</p>
                    
                    <div class="card bg-dark shadow-sm border-secondary">
                        <div class="card-body">
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" id="if-search-input" placeholder="Ingresa el N° de IF...">
                                <button class="btn btn-primary" type="button" id="if-search-btn">
                                    <i class="fa-solid fa-search me-1"></i>
                                    Buscar
                                </button>
                            </div>
                            <div id="if-search-loader" class="text-center my-3 d-none">
                                <div class="spinner-border text-primary" role="status"></div>
                                <p class="mt-2">Buscando en Flagrancia...</p>
                            </div>
                            <div id="if-search-results-card" class="card shadow-sm mt-4 d-none animate__animated animate__fadeIn">
                                <div class="card-header bg-success text-white">
                                    <i class="fa-solid fa-check-circle me-2"></i>
                                    <strong>Datos Encontrados Correctamente</strong>
                                </div>
                                <div class="card-body bg-dark" id="if-search-results-content"></div>
                            </div>
                        </div>
                    </div>
                    <div class="text-end mt-4">
                        <button id="if-search-continuar" class="btn btn-success btn-lg d-none animate__animated animate__pulse">
                            <i class="fa-solid fa-arrow-right me-2"></i>
                            Continuar al Paso 2
                        </button>
                    </div>
                </div>

                <div id="wizard-step-2" class="d-none">
                    <h3 class="mb-3">Paso 2: Completar Datos del Oficio</h3>
                    
                    <div class="card bg-dark shadow-sm border-secondary">
                        <div class="card-body p-4 oficio-form">
                            
                            <div class="row mb-3">
                                <label class="col-sm-3 col-form-label">Oficio No.</label>
                                <div class="col-sm-9 d-flex align-items-center">
                                    <span class="me-1">PN-ZONA8-JINVPJ-UDF-</span>
                                    <input type="text" class="form-control me-1" id="oficio-anio" style="width: 80px;">
                                    <span>-</span>
                                    <input type="text" class="form-control ms-1" id="oficio-numero" placeholder="Ej: 978-O">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label class="col-sm-3 col-form-label">Fecha:</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="oficio-fecha" placeholder="Guayaquil, 03 de octubre del 2025">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label for="oficio-asunto-numero" class="col-sm-3 col-form-label fw-bold">Asunto:</label>
                                <div class="col-sm-9 d-flex align-items-center">
                                    <span class="me-1">CONTESTACION AL OFICIO No. FPG-FEIFO</span>
                                    <input type="text" class="form-control ms-1" id="oficio-asunto-numero" placeholder="Ej: 9-2953-2025-000585-O.">
                                </div>
                            </div>

                            <hr class="my-4 border-secondary">

                            <div class="row mb-3">
                                <label for="oficio-tratamiento" class="col-sm-3 col-form-label">Tratamiento:</label>
                                <div class="col-sm-9">
                                    <select class="form-select" id="oficio-tratamiento">
                                        <option value="Señor:">Señor:</option>
                                        <option value="Señora:">Señora:</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="oficio-fiscal-nombre" class="col-sm-3 col-form-label">Nombre Fiscal:</label>
                                <div class="col-sm-9">
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="oficio-fiscal-nombre">
                                        <span class="input-group-text">FISCAL DE LO PENAL DEL GUAYAS</span>
                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="oficio-fiscal-unidad" class="col-sm-3 col-form-label">Unidad Fiscal:</label>
                                <div class="col-sm-9 d-flex align-items-center">
                                    <span class="me-1">FISCALIA DE INVESTIGACIÓN DE</span>
                                    <input type="text" class="form-control ms-1" id="oficio-fiscal-unidad">
                                </div>
                            </div>
                            
                            <hr class="my-4 border-secondary">
                            
                            <p class="text-white-50">El siguiente texto se rellenará con los datos del formulario y los datos de la búsqueda.</p>
                            <div class="p-3 bg-dark-subtle rounded border border-secondary mb-3">
                                <p>En su despacho. -</p>
                                <p>De mis consideraciones:</p>
                                <p>
                                    Para su conocimiento y fines legales pertinentes adjunto al presente, el Informe de
                                    Reconocimiento del Lugar de los Hechos Nro. <strong id="cuerpo-oficio-nro" class="text-warning">...</strong>, de fecha <strong id="cuerpo-oficio-fecha" class="text-warning">...</strong>, con relación a la Instrucción Fiscal, No. <strong id="cuerpo-if-nro" class="text-warning">...</strong>, que se sigue
                                    en contra del procesado: <strong id="cuerpo-detenido-nombre" class="text-warning">...</strong>.
                                    Por el presunto delito de <strong id="cuerpo-delito-nombre" class="text-warning">...</strong>.
                                </p>
                            </div>

                            <hr class="my-4 border-secondary">

                            <p class="mb-3">Atentamente.</p>
                            <div style="height: 60px;"></div>
                            <div class="row mb-2">
                                <label for="oficio-agente-nombre" class="col-sm-3 col-form-label">Agente:</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="oficio-agente-nombre" placeholder="Nombre del Agente">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="oficio-agente-grado" class="col-sm-3 col-form-label">Grado:</label>
                                <div class="col-sm-9 d-flex align-items-center">
                                    <select class="form-select" id="oficio-agente-grado">
                                        <option value="">Seleccione un grado...</option>
                                        <option value="POLICIA">POLICIA</option>
                                        <option value="CABO SEGUNDO">CABO SEGUNDO</option>
                                        <option value="CABO PRIMERO">CABO PRIMERO</option>
                                        <option value="SARGENTO SEGUNDO">SARGENTO SEGUNDO</option>
                                        <option value="SARGENTO PRIMERO">SARGENTO PRIMERO</option>
                                    </select>
                                    <span class="ms-2">DE POLICIA</span>
                                </div>
                            </div>
                            <p class="mt-3 mb-0">PERITO DE LA SECCIÓN DE DELITOS FLAGRANTES DE LA PJ-G-DMG-Z8.</p>
                            <p class="my-1">Org./Dest.</p>
                            <p class="my-1">CC/Archivo PJG.</p>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-4">
                        <button id="btn-regresar-paso1" class="btn btn-outline-secondary btn-lg">
                            <i class="fa-solid fa-arrow-left me-2"></i>
                            Regresar
                        </button>
                        <button id="btn-guardar-paso2" class="btn btn-success btn-lg">
                            Guardar y Continuar
                            <i class="fa-solid fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                </div> </div> <div class="tab-pane fade p-4" id="buscar-pane" role="tabpanel">
                <h3 class="mb-3">Buscar Informes</h3>
                <p>Busca por Número de IF o Nombre del detenido.</p>
                <form id="search-form" class="mb-4">
                    <div class="input-group">
                        <input type="text" id="search-term" class="form-control" placeholder="Buscar por IF o Nombre del detenido..." required>
                        <button class="btn btn-primary" type="submit" id="btn-search">
                            <i class="fa-solid fa-search"></i> Buscar
                        </button>
                    </div>
                </form>
                <div id="search-results-container" class="mt-4" style="display: none;">
                    <h4>Resultados de la Búsqueda</h4>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped table-hover app-table">
                            <thead>
                                <tr>
                                    <th>N° Informe (IF)</th>
                                    <th>Nombre del Detenido</th>
                                    <th>Fecha Creación</th>
                                    <th>Creado Por</th>
                                    <th style="width: 150px;">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="search-results-tbody">
                                <tr>
                                    <td>PN-ZONA8-2025-001</td>
                                    <td>ROBERTO FERNANDO GUAMAN</td>
                                    <td>30/10/2025</td>
                                    <td>admin</td>
                                    <td>
                                        <button class="btn btn-warning btn-sm me-1" title="Copiar y Editar">
                                            <i class="fa-solid fa-copy"></i>
                                        </button>
                                        <button class="btn btn-info btn-sm me-1" title="Editar">
                                            <i class="fa-solid fa-pen-to-square"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" title="Visualizar e Imprimir (PDF)">
                                            <i class="fa-solid fa-file-pdf"></i>
                                        </button>
                                    </td>
                                </tr>
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade p-4" id="editar-pane" role="tabpanel">
                <h3 class="mb-3">Editar Informe</h3>
                <p>Esta sección se cargará con los datos de un informe existente para modificarlo.</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/app.js"></script>

</body>
</html>